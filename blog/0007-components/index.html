<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">BEEP 7 - Progressive component Integration Enhancement | Booster Framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.boosterframework.com/blog/0007-components"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="BEEP 7 - Progressive component Integration Enhancement | Booster Framework"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-01-31T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/NickSeagull"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.boosterframework.com/blog/0007-components"><link data-rh="true" rel="alternate" href="https://docs.boosterframework.com/blog/0007-components" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.boosterframework.com/blog/0007-components" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JOKOWZFYZX-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Booster Framework RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Booster Framework Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Booster Framework" href="/opensearch.xml">

<script defer="defer" src="https://cdn.usefathom.com/script.js" spa="auto" site="LHRTIPFZ"></script><link rel="stylesheet" href="/assets/css/styles.8e261003.css">
<script src="/assets/js/runtime~main.f7210f4c.js" defer="defer"></script>
<script src="/assets/js/main.4d2cebe3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/booster-logo.png" alt="Booster Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/booster-logo.png" alt="Booster Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div><a class="navbar__item navbar__link" href="/">Docs</a></div><div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Proposals</a></div><div><a href="https://github.com/boostercloud/booster" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" customprops="[object Object]">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div><a href="https://discord.gg/bDY8MKx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" customprops="[object Object]">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="navbar__items navbar__items--right"><a href="javascript:void(0)" class="navbar_custom_item--button"><img src="/img/privateGptLogo.svg" alt="PrivateGPT" class="navbar_custom_item--image"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Proposals Index</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0000-index">BEEP 0 - Index of Booster Evolution Enhancement Proposals</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0001-purpose-and-guidelines">BEEP 1 - Purpose and Guidelines</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0002-project-target">BEEP 2 - Target and User Persona</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0003-principles-of-design">BEEP 3 - Principles of Design</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0004-semantic-versioning">BEEP 4 - Semantic Versioning</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0005-agent-codebase">BEEP 5 - Agent-Based Codebase Structure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/0006-remote-imports">BEEP 6 - Remote Imports</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/0007-components">BEEP 7 - Progressive component Integration Enhancement</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Introduction"><header><h1 class="title_f1Hy" itemprop="headline">BEEP 7 - Progressive component Integration Enhancement</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-01-31T00:00:00.000Z" itemprop="datePublished">January 31, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/NickSeagull" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/NickSeagull.png" alt="Nick Tchayka" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/NickSeagull" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nick Tchayka</span></a></div><small class="avatar__subtitle" itemprop="description">Booster Core Team</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>STATUS - DRAFT</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>This document proposes an enhancement to Booster Framework, introducing a new component integration mechanism. This enhancement aims not to overhaul the existing architecture but to provide an incremental upgrade, allowing the Framework to retain its current functionality while adding new, more efficient capabilities. This proposal details the transition to a system where components, written with clear interfaces using <a href="https://www.effect.website/" target="_blank" rel="noopener noreferrer">Effect</a>, can be directly injected into the Booster project, offering improved efficiency and customization.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This component system is <strong>not meant to be used by all Booster users</strong>, but rather by it&#x27;s <strong>power users</strong> who want to extend their apps in ways that are not possible with the current system, as well as <strong>Booster contributors</strong> who want to add new features to the framework.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="current-mechanism-and-its-limitations">Current Mechanism and Its Limitations<a href="#current-mechanism-and-its-limitations" class="hash-link" aria-label="Direct link to Current Mechanism and Its Limitations" title="Direct link to Current Mechanism and Its Limitations">​</a></h2>
<p>The Booster Framework currently relies on users specifying packages to be loaded (like Azure provider or filesystem components) in a JSON configuration, which are then <strong>dynamically imported</strong> by the framework. While functional, this approach has limitations in efficiency and customization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enhancement-overview">Enhancement Overview<a href="#enhancement-overview" class="hash-link" aria-label="Direct link to Enhancement Overview" title="Direct link to Enhancement Overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface-definition-and-inversion-of-control">Interface Definition and Inversion of Control<a href="#interface-definition-and-inversion-of-control" class="hash-link" aria-label="Direct link to Interface Definition and Inversion of Control" title="Direct link to Interface Definition and Inversion of Control">​</a></h3>
<ul>
<li><strong>Interface Definition</strong>: We propose to define explicit interfaces for CLI commands, runtime operations, and post-compile activities.</li>
<li><strong>Inversion of Control</strong>: Shift from dynamic imports to a system where users inject components directly into their Booster projects.</li>
<li><strong><a href="https://www.effect.website/" target="_blank" rel="noopener noreferrer">Effect</a> Integration</strong>: Utilize <a href="https://www.effect.website/" target="_blank" rel="noopener noreferrer">Effect</a> for writing components, ensuring robustness and type safety.<!-- -->
<ul>
<li>This part is crucial, because it enhances the component system with:<!-- -->
<ul>
<li><strong>Dependency injection</strong>: Components can be automatically injected into other components, allowing for a more modular design.</li>
<li><strong>Implicit structured logging and monitoring</strong>: Components can log and monitor their own operations, and the framework can log and monitor the operations of the components.</li>
<li><strong>Better concurrency management</strong>: Components can be run concurrently, and the framework can manage the concurrency of the components.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintaining-existing-functionality">Maintaining Existing Functionality<a href="#maintaining-existing-functionality" class="hash-link" aria-label="Direct link to Maintaining Existing Functionality" title="Direct link to Maintaining Existing Functionality">​</a></h3>
<ul>
<li><strong>Gradual Transition</strong>: The new system is designed to coexist with the current architecture, allowing users to transition at their own pace.</li>
<li><strong>Backward Compatibility</strong>: Ensures existing Booster applications continue to function without mandatory modifications.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits">Benefits<a href="#benefits" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits">​</a></h2>
<ul>
<li><strong>Efficiency</strong>: Reduces the overhead associated with dynamic imports.</li>
<li><strong>Customization</strong>: Offers users greater control over their applications.</li>
<li><strong>Type Safety</strong>: Enhances the robustness of applications through type-safe component development.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-and-implementation">Design and Implementation<a href="#design-and-implementation" class="hash-link" aria-label="Direct link to Design and Implementation" title="Direct link to Design and Implementation">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This is a draft of the design and implementation of the new component system. It is not final and is subject to change.
It hasn&#x27;t been tested against a compiler, tried in any way, let alone implemented. It is an &quot;off the top of my head&quot; design.</p></div></div>
<p>The key idea of the component system is to allow defining transient run-times, which allow specifying the behavior of a component during a specific run-time. We&#x27;re writing run-time and not runtime, because a component can run during different moments that is not the runtime of an application.</p>
<p>You can think on this as the <code>npm</code> scripts that define the behavior of a package during different moments of the life of a package, like <code>preinstall</code>, <code>postinstall</code>, <code>prepublish</code>, etc. but for components.</p>
<p>The initial defined run-times are:</p>
<ul>
<li><strong>CLI</strong>: The component is executed during the execution of a CLI command.</li>
<li><strong>Runtime</strong>: The component is executed during the execution of the application.</li>
<li><strong>Verification</strong>: The component is executed after the compilation of the application. It is called verification, because at this point it allows us to perform additional validation and verification of the application.</li>
</ul>
<p>Of course, this list is not set in stone, and we can add more run-times in the future.</p>
<p>Because the component system is composable, it allows us to define components that are composed of other components. Here is when the run-times
become crucial. If a component uses another one, when a run-time of the parent component is triggered, the same run-time of the child component
gets triggered too. This is a bit of a tongue-twister, so let&#x27;s take a look at a more concrete example.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-event-file-generation-component">Example: Event File Generation Component<a href="#example-event-file-generation-component" class="hash-link" aria-label="Direct link to Example: Event File Generation Component" title="Direct link to Example: Event File Generation Component">​</a></h3>
<p>Imagine we&#x27;re defining a component called <code>EventGenerator</code> that allows us to generate files for events. Yes, this is an already existing feature of the framework, but
it will serve us an example.</p>
<p>Let&#x27;s assume that there&#x27;s an already existing component called <code>FileGenerator</code> that allows writing an arbitrary string to a file that will be placed inside of the project <code>src</code> folder. This component would be defined like this (pseudocode):</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This interface allows the users to provide different implementations for the components</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileGenerator</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    folder</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    filename</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    content</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Effect</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Concrete implementation for FileGenerator, could do whatever</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// as long as it fulfills the contract of `FileGenerator`.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Could be a mock one, a remote one, etc...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> FileGenerator </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">defineComponent</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">FileGenerator</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The actual method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">folder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Here we specify that the block inside should only be executed during CLI-time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">during</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">RunTimes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token constant" style="color:rgb(130, 170, 255)">CLI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... actual code to generate the file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, if we were to define the <code>EventGenerator</code> component, if we used <code>FileGenerator</code>. We wouldn&#x27;t need to specify the CLI time, because that&#x27;s
already done at the <code>FileGenerator</code> component:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">EventGenerator</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    name</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fields</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Array</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Effect</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> EventGenerator </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(130, 170, 255)">defineComponent</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token generic-function generic class-name" style="color:rgb(255, 203, 107)">EventGenerator</span><span class="token generic-function generic class-name operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Effect.gen allows us to define custom async/await syntax that is extensible</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// instead of an async function we use a JS generator function,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// and instead of await, we use the `_` helper and the `yield*` JS keyword.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">generate</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fields</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> Effect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">gen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> content </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">...</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// generate the content of the file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// We ask the dependency injection mechanism for the FileGenerator component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> fileGen </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">yield</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">FileGenerator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// We run the generate method in the file generator component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">yield</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fileGen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;events&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string string" style="color:rgb(195, 232, 141)">.ts</span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The generator function might impress at first, but it is <strong>regular JS syntax</strong>, and it is a <strong>1:1 mapping to async/await</strong>. Even though it introduces
a bit of friction, we believe that <strong>the advantages outweight the friction by far</strong>. You can check the
<a href="https://www.effect.website/docs/essentials/using-generators#comparing-effectgen-with-asyncawait" target="_blank" rel="noopener noreferrer"><strong>async/await comparison example on the Effect site</strong></a>.</p></div></div>
<p>In the example above, we just used the <code>FileGenerator</code> component, and because that one already defined the CLI-time behavior, we didn&#x27;t need to do
it ourselves.</p>
<p>This is an extremely powerful idea, because with a little subset of primitive components, we allow extending and customizing Booster apps in
inimaginable ways. Power users could define their own database component that allows them to configure, deploy and use a database in their app
<strong>with a single function call.</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-execute-the-different-run-times">How to execute the different run-times?<a href="#how-to-execute-the-different-run-times" class="hash-link" aria-label="Direct link to How to execute the different run-times?" title="Direct link to How to execute the different run-times?">​</a></h3>
<p>These components would get injected into the <code>Booster.config</code> block for now, as it gets loaded when
the application starts.</p>
<p>If a Booster application is configured with some components, it&#x27;s main executable will get extended with an additional CLI flag <code>--exec</code> that
allows specifying the run-time to execute.</p>
<p>To maintain backwards compatibility, <strong>if <code>--exec</code> is not specified, it will run the run-time by default</strong>, as it is what happens when one runs a
Booster app nowadays.</p>
<p>This way of working allows taking responsibility out of the Booster CLI tool and allow users to create a regular <code>boost</code> (or any more descriptive name)
script in their <code>package.json</code> file, allowing to execute the CLI components right with <code>pnpm</code> (or their preferred Node package manager):</p>
<div class="terminalWindow_wGrl"><div class="terminalWindowHeader_o9Cs"><div class="buttons_IGLB"><span class="dot_fGZE" style="background:#f25f58"></span><span class="dot_fGZE" style="background:#fbbe3c"></span><span class="dot_fGZE" style="background:#58cb42"></span></div></div><div class="terminalWindowBody_tzdS"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ pnpm boost event:generate --name AccountCreated --fields &#x27;amount:number&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="considerations">Considerations<a href="#considerations" class="hash-link" aria-label="Direct link to Considerations" title="Direct link to Considerations">​</a></h2>
<ul>
<li><strong>Compatibility Measures</strong>: Ensure the new component system aligns with the existing Booster Framework.</li>
<li><strong>Learning Curve</strong>: Address the potential learning curve associated with <a href="https://www.effect.website/" target="_blank" rel="noopener noreferrer">Effect</a> through detailed documentation and community support.</li>
<li><strong>Error Handling</strong>: Leverage TypeScript&#x27;s compiler for improved error handling and runtime safety.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>This proposal lays the groundwork for a progressive enhancement in Booster Framework&#x27;s component integration mechanism. This proposal balances the need for advanced functionality and efficiency with the necessity of maintaining existing systems, while giving power users a great extensibility tool, and
most importantly, increasing the robustness of the framework overall.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/boostercloud/booster/edit/main/website/proposals/0007-components/index.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/0006-remote-imports"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">BEEP 6 - Remote Imports</div></a></nav><div></div></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#current-mechanism-and-its-limitations" class="table-of-contents__link toc-highlight">Current Mechanism and Its Limitations</a></li><li><a href="#enhancement-overview" class="table-of-contents__link toc-highlight">Enhancement Overview</a><ul><li><a href="#interface-definition-and-inversion-of-control" class="table-of-contents__link toc-highlight">Interface Definition and Inversion of Control</a></li><li><a href="#maintaining-existing-functionality" class="table-of-contents__link toc-highlight">Maintaining Existing Functionality</a></li></ul></li><li><a href="#benefits" class="table-of-contents__link toc-highlight">Benefits</a></li><li><a href="#design-and-implementation" class="table-of-contents__link toc-highlight">Design and Implementation</a><ul><li><a href="#example-event-file-generation-component" class="table-of-contents__link toc-highlight">Example: Event File Generation Component</a></li><li><a href="#how-to-execute-the-different-run-times" class="table-of-contents__link toc-highlight">How to execute the different run-times?</a></li></ul></li><li><a href="#considerations" class="table-of-contents__link toc-highlight">Considerations</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer-container"><div class="footer-ls"><div class="footer-ls-section"><h5 class="footer-ls-section-title">Join Us</h5><div class="footer-ls-column"><a href="https://github.com/boostercloud">Github</a><a href="https://discord.gg/bDY8MKx">Discord</a><a href="https://twitter.com/theboosterway">Twitter</a><a href="https://www.linkedin.com/company/boosterin-labs/">Linkedin</a></div></div><div class="footer-ls-section"><h5 class="footer-ls-section-title">Resources</h5><div class="footer-ls-column"><a href="https://docs.boosterframework.com/">Docs</a><a href="https://www.youtube.com/channel/UCpUTONI8OG19pr9A4cn35DA">YouTube</a><a href="https://www.youtube.com/channel/UCxUYk1SVyNRCGNV-9SYjEFQ">Podcast</a><a href="https://www.dropbox.com/sh/wyt7rdq7l873iyl/AADzGIae_adkFyjB_VTW2UYka?dl=0">Press kit</a></div></div><div class="footer-ls-section"><h5 class="footer-ls-section-title">Read more</h5><div class="footer-ls-column"><a href="https://dev.to/boostercloud">Dev.to</a><a href="https://medium.com/@theam">Medium</a></div></div></div><div class="footer-cr"><p>Booster is an open-source initiative from <a href="https://www.theagilemonkeys.com/">The Agile Monkeys.</a></p><p><a href="https://www.boosterframework.com/privacy-policy">Privacy Policy</a></p></div></footer></div>
</body>
</html>